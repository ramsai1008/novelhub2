(()=>{var e={};e.id=698,e.ids=[698],e.modules={1132:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspaces/novelhub2/src/app/admin/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspaces/novelhub2/src/app/admin/page.tsx","default")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12454:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(60687),a=r(43210),n=r(75535),l=r(33784);r(78403);var o=r(16189);function i(){(0,o.useRouter)();let[e,t]=(0,a.useState)(null),[r,i]=(0,a.useState)(""),[u,d]=(0,a.useState)([]),[p,c]=(0,a.useState)([]),[x,m]=(0,a.useState)(""),[h,b]=(0,a.useState)(""),[v,f]=(0,a.useState)(""),[g,w]=(0,a.useState)(""),[N,j]=(0,a.useState)(null),[q,C]=(0,a.useState)(null),y=async()=>{d((await (0,n.GG)((0,n.rJ)(l.db,"novels"))).docs.map(e=>({id:e.id,...e.data()})))},k=async e=>{let t=(0,n.rJ)(l.db,"novels",e,"chapters");c((await (0,n.GG)(t)).docs.map(e=>({id:e.id,...e.data()})))},P=async e=>{e.preventDefault(),r&&(await (0,n.gS)((0,n.rJ)(l.db,"novels"),{title:r,createdAt:Date.now()}),i(""),y())},S=async e=>{if(e.preventDefault(),!h||!v||!x)return;let t={title:h,content:v,chapterNumber:parseInt(g),updatedAt:Date.now()};N?(await (0,n.mZ)((0,n.H9)(l.db,"novels",x,"chapters",N),t),j(null),C(null)):await (0,n.gS)((0,n.rJ)(l.db,"novels",x,"chapters"),{...t,createdAt:Date.now()}),b(""),f(""),w(""),k(x)},_=async e=>{await (0,n.kd)((0,n.H9)(l.db,"novels",x,"chapters",e)),k(x)};return(0,s.jsxs)("div",{className:"max-w-2xl w-full mx-auto p-3 sm:p-6 overflow-x-auto",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Admin Panel"}),(0,s.jsxs)("form",{onSubmit:P,className:"mb-6",children:[(0,s.jsx)("input",{value:r,onChange:e=>i(e.target.value),placeholder:"Novel Title",className:"border p-2 mr-2 w-full"}),(0,s.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2",children:"Add Novel"})]}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Novels"}),(0,s.jsx)("ul",{className:"mb-6 max-h-60 overflow-y-auto",children:u.map(e=>(0,s.jsx)("li",{onClick:()=>{m(e.id),k(e.id)},className:"cursor-pointer text-blue-600 underline",children:e.title},e.id))}),x&&(0,s.jsxs)("form",{onSubmit:S,className:"mb-6",children:[(0,s.jsx)("input",{value:h,onChange:e=>b(e.target.value),placeholder:"Chapter Title",className:"border p-2 mr-2 w-full"}),(0,s.jsx)("input",{value:g,onChange:e=>w(e.target.value),placeholder:"Chapter Number",className:"border p-2 mr-2 w-full",type:"number"}),(0,s.jsx)("textarea",{value:v,onChange:e=>f(e.target.value),placeholder:"Chapter Content",className:"border p-2 mr-2 w-full"}),(0,s.jsx)("button",{className:"bg-green-600 text-white px-4 py-2",children:N?"Update Chapter":"Add Chapter"}),N&&(0,s.jsx)("button",{onClick:()=>{j(null),C(null),b(""),f(""),w("")},className:"bg-gray-500 text-white px-2 py-1 rounded ml-2",children:"Cancel Edit"})]}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Chapters"}),(0,s.jsx)("ul",{className:"max-h-60 overflow-y-auto",children:p.map(e=>(0,s.jsxs)("li",{className:"mb-2",children:[(0,s.jsxs)("span",{className:"font-bold",children:[e.chapterNumber,". ",e.title]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,s.jsx)("button",{onClick:()=>{b(e.title),f(e.content),w(e.chapterNumber.toString()),j(e.id),C(e)},className:"text-yellow-500",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>_(e.id),className:"text-red-500",children:"Delete"})]})]},e.id))})]})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},42402:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>c,tree:()=>u});var s=r(65239),a=r(48088),n=r(88170),l=r.n(n),o=r(30893),i={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(t,i);let u={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1132)),"/workspaces/novelhub2/src/app/admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/workspaces/novelhub2/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/workspaces/novelhub2/src/app/admin/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},c=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},50251:(e,t,r)=>{Promise.resolve().then(r.bind(r,12454))},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},90003:(e,t,r)=>{Promise.resolve().then(r.bind(r,1132))},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[509,141],()=>r(42402));module.exports=s})();