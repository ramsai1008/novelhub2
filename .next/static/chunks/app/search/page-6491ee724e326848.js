(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[959],{5695:(a,e,t)=>{"use strict";var s=t(8999);t.o(s,"useParams")&&t.d(e,{useParams:function(){return s.useParams}}),t.o(s,"useRouter")&&t.d(e,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(e,{useSearchParams:function(){return s.useSearchParams}})},6104:(a,e,t)=>{"use strict";t.d(e,{CS:()=>u,Gq:()=>o,HS:()=>p,J_:()=>m,Mv:()=>f,Vb:()=>w,YX:()=>v,ab:()=>h,db:()=>l,fC:()=>y,iJ:()=>i,j2:()=>c,qY:()=>x});var s=t(3915),r=t(5317),n=t(6203);let d=(0,s.Wp)({apiKey:"AIzaSyBreQy9u91K6FMTcoY4rl22zNAw_f0juAo",authDomain:"novelplane.firebaseapp.com",projectId:"novelplane",storageBucket:"novelplane.firebasestorage.app",messagingSenderId:"208383799577",appId:"1:208383799577:web:ca27cea78d7588d73e9588"}),l=(0,r.aU)(d),c=(0,n.getAuth)(d);async function i(a,e,t,s){let n=(0,r.doc)(l,"users/".concat(a,"/history"),"".concat(e,"_").concat(t));await (0,r.BN)(n,{novelId:e,chapterId:t,title:s,readAt:(0,r.O5)()})}let o=async(a,e,t)=>{let s=(0,r.doc)(l,"users/".concat(a,"/lastRead"),e);await (0,r.BN)(s,{chapterId:t})},u=async(a,e)=>{let t=(0,r.doc)(l,"users/".concat(a,"/lastRead"),e),s=await (0,r.getDoc)(t);return s.exists()&&s.data().chapterId||null},h=async()=>(await (0,r.GG)((0,r.rJ)(l,"novels"))).docs.map(a=>({id:a.id,...a.data()})),m=async a=>{let e=(await (0,r.GG)((0,r.rJ)(l,"bookmarks"))).docs.map(a=>({id:a.id,...a.data()})).filter(e=>e.userId===a&&e.novelId).map(a=>a.novelId);return 0===e.length?[]:(await (0,r.GG)((0,r.rJ)(l,"novels"))).docs.map(a=>({id:a.id,...a.data()})).filter(a=>e.includes(a.id))},p=async()=>{let a=await (0,r.GG)((0,r.rJ)(l,"novels")),e=new Set;return a.docs.forEach(a=>{let t=a.data();Array.isArray(t.tags)&&t.tags.forEach(a=>e.add(a))}),Array.from(e)},f=async a=>(await (0,r.GG)((0,r.rJ)(l,"novels"))).docs.map(a=>({id:a.id,...a.data()})).filter(e=>Array.isArray(e.tags)&&e.tags.includes(a)),y=async a=>{(0,r.doc)(l,"novels",a);let e=await (0,r.GG)((0,r.rJ)(l,"novels")),t=null;if(e.forEach(e=>{e.id===a&&(t={id:e.id,...e.data()})}),!t)return null;let s=(await (0,r.GG)((0,r.rJ)(l,"novels",a,"chapters"))).docs.map(a=>({id:a.id,...a.data()}));return{...t,chapters:s}},v=async(a,e)=>{(0,r.doc)(l,"novels",a,"chapters",e);let t=await (0,r.GG)((0,r.rJ)(l,"novels",a,"chapters")),s=null;return t.forEach(a=>{a.id===e&&(s={id:a.id,...a.data()})}),s},w=async a=>{let e=(0,r.rJ)(l,"novels",a,"chapters");return(await (0,r.GG)(e)).docs.map(a=>({id:a.id,...a.data()}))},x=async a=>(await (0,r.GG)((0,r.rJ)(l,"users/".concat(a,"/history")))).docs.map(a=>({id:a.id,...a.data()}))},7136:(a,e,t)=>{Promise.resolve().then(t.bind(t,8933))},8933:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>i});var s=t(5155),r=t(2115),n=t(5695),d=t(6874),l=t.n(d),c=t(6104);function i(){let a=(0,n.useSearchParams)().get("query")||"",[e,t]=(0,r.useState)([]),[d,i]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{async function e(){i(!0);let e=await (0,c.ab)(),s=a.toLowerCase().split(/\s+/).filter(Boolean);t(e.filter(a=>{let e=a.title.toLowerCase().split(/\s+/);return s.some(a=>e.includes(a))})),i(!1)}a.trim().length>0?e():(t([]),i(!1))},[a]),(0,s.jsxs)("div",{className:"max-w-3xl mx-auto py-8 px-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Search Results"}),d?(0,s.jsx)("div",{children:"Loading..."}):0===e.length?(0,s.jsxs)("div",{className:"text-gray-500 text-center text-lg",children:['No results found for "',a,'"']}):(0,s.jsx)("ul",{className:"space-y-4",children:e.map(a=>{var e;return(0,s.jsxs)("li",{className:"bg-white dark:bg-gray-800 rounded shadow p-4",children:[(0,s.jsx)(l(),{href:"/novels/".concat(a.id),className:"text-lg font-semibold text-blue-700 dark:text-blue-400 hover:underline",children:a.title}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[null==(e=a.description)?void 0:e.slice(0,120),"..."]})]},a.id)})})]})}}},a=>{var e=e=>a(a.s=e);a.O(0,[992,163,645,874,441,684,358],()=>e(7136)),_N_E=a.O()}]);