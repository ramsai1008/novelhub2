(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{565:(e,a,t)=>{Promise.resolve().then(t.bind(t,7220))},5695:(e,a,t)=>{"use strict";var l=t(8999);t.o(l,"useRouter")&&t.d(a,{useRouter:function(){return l.useRouter}})},6104:(e,a,t)=>{"use strict";t.d(a,{J_:()=>c,ab:()=>o,db:()=>d,j2:()=>i});var l=t(3915),s=t(5317),n=t(6203);let r=(0,l.Wp)({apiKey:"AIzaSyBreQy9u91K6FMTcoY4rl22zNAw_f0juAo",authDomain:"novelplane.firebaseapp.com",projectId:"novelplane",storageBucket:"novelplane.firebasestorage.app",messagingSenderId:"208383799577",appId:"1:208383799577:web:ca27cea78d7588d73e9588"}),d=(0,s.aU)(r),i=(0,n.xI)(r),o=async()=>(await (0,s.GG)((0,s.rJ)(d,"novels"))).docs.map(e=>({id:e.id,...e.data()})),c=async e=>{let a=(await (0,s.GG)((0,s.rJ)(d,"bookmarks"))).docs.map(e=>({id:e.id,...e.data()})).filter(a=>a.userId===e&&a.novelId).map(e=>e.novelId);return 0===a.length?[]:(await (0,s.GG)((0,s.rJ)(d,"novels"))).docs.map(e=>({id:e.id,...e.data()})).filter(e=>a.includes(e.id))}},7220:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var l=t(5155),s=t(2115),n=t(5317),r=t(6104),d=t(6203),i=t(5695);function o(){let e=(0,i.useRouter)(),[a,t]=(0,s.useState)(null),[o,c]=(0,s.useState)(""),[u,p]=(0,s.useState)([]),[m,h]=(0,s.useState)([]),[b,x]=(0,s.useState)(""),[v,N]=(0,s.useState)(""),[j,g]=(0,s.useState)(""),[f,w]=(0,s.useState)(""),[C,y]=(0,s.useState)(null),[S,k]=(0,s.useState)(null);(0,s.useEffect)(()=>{let a=(0,d.hg)(r.j2,a=>{(null==a?void 0:a.email)==="youremail@example.com"?(t(a),G()):e.push("/login")});return()=>a()},[]);let G=async()=>{p((await (0,n.GG)((0,n.rJ)(r.db,"novels"))).docs.map(e=>({id:e.id,...e.data()})))},A=async e=>{let a=(0,n.rJ)(r.db,"novels",e,"chapters");h((await (0,n.GG)(a)).docs.map(e=>({id:e.id,...e.data()})))},I=async e=>{e.preventDefault(),o&&(await (0,n.gS)((0,n.rJ)(r.db,"novels"),{title:o,createdAt:Date.now()}),c(""),G())},J=async e=>{if(e.preventDefault(),!v||!j||!b)return;let a={title:v,content:j,chapterNumber:parseInt(f),updatedAt:Date.now()};C?(await (0,n.mZ)((0,n.H9)(r.db,"novels",b,"chapters",C),a),y(null),k(null)):await (0,n.gS)((0,n.rJ)(r.db,"novels",b,"chapters"),{...a,createdAt:Date.now()}),N(""),g(""),w(""),A(b)},_=async e=>{await (0,n.kd)((0,n.H9)(r.db,"novels",b,"chapters",e)),A(b)};return(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Admin Panel"}),(0,l.jsxs)("form",{onSubmit:I,className:"mb-6",children:[(0,l.jsx)("input",{value:o,onChange:e=>c(e.target.value),placeholder:"Novel Title",className:"border p-2 mr-2"}),(0,l.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2",children:"Add Novel"})]}),(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"Novels"}),(0,l.jsx)("ul",{className:"mb-6",children:u.map(e=>(0,l.jsx)("li",{onClick:()=>{x(e.id),A(e.id)},className:"cursor-pointer text-blue-600 underline",children:e.title},e.id))}),b&&(0,l.jsxs)("form",{onSubmit:J,className:"mb-6",children:[(0,l.jsx)("input",{value:v,onChange:e=>N(e.target.value),placeholder:"Chapter Title",className:"border p-2 mr-2"}),(0,l.jsx)("input",{value:f,onChange:e=>w(e.target.value),placeholder:"Chapter Number",className:"border p-2 mr-2",type:"number"}),(0,l.jsx)("textarea",{value:j,onChange:e=>g(e.target.value),placeholder:"Chapter Content",className:"border p-2 mr-2"}),(0,l.jsx)("button",{className:"bg-green-600 text-white px-4 py-2",children:C?"Update Chapter":"Add Chapter"}),C&&(0,l.jsx)("button",{onClick:()=>{y(null),k(null),N(""),g(""),w("")},className:"bg-gray-500 text-white px-2 py-1 rounded ml-2",children:"Cancel Edit"})]}),(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"Chapters"}),(0,l.jsx)("ul",{children:m.map(e=>(0,l.jsxs)("li",{className:"mb-2",children:[(0,l.jsxs)("span",{className:"font-bold",children:[e.chapterNumber,". ",e.title]}),(0,l.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,l.jsx)("button",{onClick:()=>{N(e.title),g(e.content),w(e.chapterNumber.toString()),y(e.id),k(e)},className:"text-yellow-500",children:"Edit"}),(0,l.jsx)("button",{onClick:()=>_(e.id),className:"text-red-500",children:"Delete"})]})]},e.id))})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[992,163,645,441,684,358],()=>a(565)),_N_E=e.O()}]);