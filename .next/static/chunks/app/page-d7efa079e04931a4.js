(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3166:(e,a,t)=>{"use strict";t.d(a,{A:()=>d});var s=t(2115),r=t(6203),l=t(6104);function d(){let[e,a]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=(0,r.onAuthStateChanged)(l.j2,e=>{a(e)});return()=>e()},[]),{user:e}}},3792:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var s=t(5155),r=t(2115),l=t(6874),d=t.n(l),i=t(6104),n=t(3166);function o(){let[e,a]=(0,r.useState)([]),[t,l]=(0,r.useState)([]),[o,c]=(0,r.useState)(""),[u,h]=(0,r.useState)(!0),{user:g}=(0,n.A)();(0,r.useEffect)(()=>{(async()=>{a(await (0,i.ab)()),h(!1),g&&l(await (0,i.J_)(g.uid))})()},[g]);let m=e.filter(e=>e.title.toLowerCase().includes(o.toLowerCase()));return(0,s.jsxs)("div",{className:"px-4 py-6 max-w-7xl mx-auto",children:[!g&&(0,s.jsxs)("div",{className:"absolute right-8 top-8 flex gap-3 z-10",children:[(0,s.jsx)(d(),{href:"/login",className:"px-4 py-2 rounded bg-blue-600 text-white font-semibold shadow hover:bg-blue-700 transition",children:"Login"}),(0,s.jsx)(d(),{href:"/register",className:"px-4 py-2 rounded bg-green-600 text-white font-semibold shadow hover:bg-green-700 transition",children:"Register"})]}),(0,s.jsxs)("div",{className:"relative max-w-2xl mx-auto mb-10",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search novels...",value:o,onChange:e=>c(e.target.value),className:"w-full pl-12 pr-4 py-3 rounded border border-gray-300 shadow focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white dark:border-gray-600"}),(0,s.jsx)("svg",{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-4.35-4.35M11 18a7 7 0 100-14 7 7 0 000 14z"})})]}),g&&t.length>0&&(0,s.jsxs)("div",{className:"mb-10",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDCCC Continue Reading"}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(e=>(0,s.jsx)(d(),{href:"/novels/".concat(e.id),children:(0,s.jsx)("div",{className:"p-4 bg-white dark:bg-gray-900 rounded shadow hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:(0,s.jsx)("p",{className:"text-sm font-medium truncate",children:e.title})})},e.id))})]}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\uD83C\uDFAF Featured Novels"}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6",children:m.map(e=>{var a;return(0,s.jsx)(d(),{href:"/novels/".concat(e.id),children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded overflow-hidden shadow hover:shadow-lg transition",children:[e.cover&&(0,s.jsx)("img",{src:e.cover,alt:e.title,className:"w-full h-48 object-cover"}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsx)("h3",{className:"font-semibold truncate",children:e.title}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:[null==(a=e.description)?void 0:a.slice(0,80),"..."]})]})]})},e.id)})}),!u&&0===m.length&&(0,s.jsxs)("p",{className:"text-center text-gray-500 mt-10",children:["No novels found for “",o,"”"]})]})}},6104:(e,a,t)=>{"use strict";t.d(a,{CS:()=>u,Gq:()=>c,HS:()=>m,J_:()=>g,Mv:()=>p,Vb:()=>f,YX:()=>x,ab:()=>h,db:()=>i,fC:()=>v,iJ:()=>o,j2:()=>n,qY:()=>w});var s=t(3915),r=t(5317),l=t(6203);let d=(0,s.Wp)({apiKey:"AIzaSyBreQy9u91K6FMTcoY4rl22zNAw_f0juAo",authDomain:"novelplane.firebaseapp.com",projectId:"novelplane",storageBucket:"novelplane.firebasestorage.app",messagingSenderId:"208383799577",appId:"1:208383799577:web:ca27cea78d7588d73e9588"}),i=(0,r.aU)(d),n=(0,l.getAuth)(d);async function o(e,a,t,s){let l=(0,r.H9)(i,"users/".concat(e,"/history"),"".concat(a,"_").concat(t));await (0,r.BN)(l,{novelId:a,chapterId:t,title:s,readAt:(0,r.O5)()})}let c=async(e,a,t)=>{let s=(0,r.H9)(i,"users/".concat(e,"/lastRead"),a);await (0,r.BN)(s,{chapterId:t})},u=async(e,a)=>{let t=(0,r.H9)(i,"users/".concat(e,"/lastRead"),a),s=await (0,r.x7)(t);return s.exists()&&s.data().chapterId||null},h=async()=>(await (0,r.GG)((0,r.rJ)(i,"novels"))).docs.map(e=>({id:e.id,...e.data()})),g=async e=>{let a=(await (0,r.GG)((0,r.rJ)(i,"bookmarks"))).docs.map(e=>({id:e.id,...e.data()})).filter(a=>a.userId===e&&a.novelId).map(e=>e.novelId);return 0===a.length?[]:(await (0,r.GG)((0,r.rJ)(i,"novels"))).docs.map(e=>({id:e.id,...e.data()})).filter(e=>a.includes(e.id))},m=async()=>{let e=await (0,r.GG)((0,r.rJ)(i,"novels")),a=new Set;return e.docs.forEach(e=>{let t=e.data();Array.isArray(t.tags)&&t.tags.forEach(e=>a.add(e))}),Array.from(a)},p=async e=>(await (0,r.GG)((0,r.rJ)(i,"novels"))).docs.map(e=>({id:e.id,...e.data()})).filter(a=>Array.isArray(a.tags)&&a.tags.includes(e)),v=async e=>{(0,r.H9)(i,"novels",e);let a=await (0,r.GG)((0,r.rJ)(i,"novels")),t=null;if(a.forEach(a=>{a.id===e&&(t={id:a.id,...a.data()})}),!t)return null;let s=(await (0,r.GG)((0,r.rJ)(i,"novels",e,"chapters"))).docs.map(e=>({id:e.id,...e.data()}));return{...t,chapters:s}},x=async(e,a)=>{(0,r.H9)(i,"novels",e,"chapters",a);let t=await (0,r.GG)((0,r.rJ)(i,"novels",e,"chapters")),s=null;return t.forEach(e=>{e.id===a&&(s={id:e.id,...e.data()})}),s},f=async e=>{let a=(0,r.rJ)(i,"novels",e,"chapters");return(await (0,r.GG)(a)).docs.map(e=>({id:e.id,...e.data()}))},w=async e=>(await (0,r.GG)((0,r.rJ)(i,"users/".concat(e,"/history")))).docs.map(e=>({id:e.id,...e.data()}))},8719:(e,a,t)=>{Promise.resolve().then(t.bind(t,3792))}},e=>{var a=a=>e(e.s=a);e.O(0,[992,163,645,874,441,684,358],()=>a(8719)),_N_E=e.O()}]);