(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{187:(e,t,a)=>{"use strict";a.d(t,{ThemeToggle:()=>o});var r=a(5155),s=a(7049),n=a(2098),i=a(3509),l=a(8704);function o(){let{theme:e,toggleTheme:t}=(0,s.D)(),a="dark"===e;return(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.A,{className:"w-5 h-5 text-yellow-500"}),(0,r.jsx)(l.dO,{checked:a,onChange:t,className:"".concat(a?"bg-gray-800":"bg-gray-300","\n          relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-300"),children:(0,r.jsx)("span",{className:"".concat(a?"translate-x-6 bg-white":"translate-x-1 bg-black"," inline-block h-4 w-4 transform rounded-full transition-transform")})}),(0,r.jsx)(i.A,{className:"w-5 h-5 text-gray-800 dark:text-white"})]})}},347:()=>{},460:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,6874,23)),Promise.resolve().then(a.t.bind(a,347,23)),Promise.resolve().then(a.t.bind(a,8346,23)),Promise.resolve().then(a.bind(a,7014)),Promise.resolve().then(a.bind(a,187)),Promise.resolve().then(a.bind(a,7049))},3166:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(2115),s=a(6203),n=a(6104);function i(){let[e,t]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=(0,s.onAuthStateChanged)(n.j2,e=>{t(e)});return()=>e()},[]),{user:e}}},6104:(e,t,a)=>{"use strict";a.d(t,{CS:()=>u,Gq:()=>c,HS:()=>m,J_:()=>g,Mv:()=>b,Vb:()=>v,YX:()=>p,ab:()=>h,db:()=>l,fC:()=>f,iJ:()=>d,j2:()=>o,qY:()=>x});var r=a(3915),s=a(5317),n=a(6203);let i=(0,r.Wp)({apiKey:"AIzaSyBreQy9u91K6FMTcoY4rl22zNAw_f0juAo",authDomain:"novelplane.firebaseapp.com",projectId:"novelplane",storageBucket:"novelplane.firebasestorage.app",messagingSenderId:"208383799577",appId:"1:208383799577:web:ca27cea78d7588d73e9588"}),l=(0,s.aU)(i),o=(0,n.getAuth)(i);async function d(e,t,a,r){let n=(0,s.H9)(l,"users/".concat(e,"/history"),"".concat(t,"_").concat(a));await (0,s.BN)(n,{novelId:t,chapterId:a,title:r,readAt:(0,s.O5)()})}let c=async(e,t,a)=>{let r=(0,s.H9)(l,"users/".concat(e,"/lastRead"),t);await (0,s.BN)(r,{chapterId:a})},u=async(e,t)=>{let a=(0,s.H9)(l,"users/".concat(e,"/lastRead"),t),r=await (0,s.x7)(a);return r.exists()&&r.data().chapterId||null},h=async()=>(await (0,s.GG)((0,s.rJ)(l,"novels"))).docs.map(e=>({id:e.id,...e.data()})),g=async e=>{let t=(await (0,s.GG)((0,s.rJ)(l,"bookmarks"))).docs.map(e=>({id:e.id,...e.data()})).filter(t=>t.userId===e&&t.novelId).map(e=>e.novelId);return 0===t.length?[]:(await (0,s.GG)((0,s.rJ)(l,"novels"))).docs.map(e=>({id:e.id,...e.data()})).filter(e=>t.includes(e.id))},m=async()=>{let e=await (0,s.GG)((0,s.rJ)(l,"novels")),t=new Set;return e.docs.forEach(e=>{let a=e.data();Array.isArray(a.tags)&&a.tags.forEach(e=>t.add(e))}),Array.from(t)},b=async e=>(await (0,s.GG)((0,s.rJ)(l,"novels"))).docs.map(e=>({id:e.id,...e.data()})).filter(t=>Array.isArray(t.tags)&&t.tags.includes(e)),f=async e=>{(0,s.H9)(l,"novels",e);let t=await (0,s.GG)((0,s.rJ)(l,"novels")),a=null;if(t.forEach(t=>{t.id===e&&(a={id:t.id,...t.data()})}),!a)return null;let r=(await (0,s.GG)((0,s.rJ)(l,"novels",e,"chapters"))).docs.map(e=>({id:e.id,...e.data()}));return{...a,chapters:r}},p=async(e,t)=>{(0,s.H9)(l,"novels",e,"chapters",t);let a=await (0,s.GG)((0,s.rJ)(l,"novels",e,"chapters")),r=null;return a.forEach(e=>{e.id===t&&(r={id:e.id,...e.data()})}),r},v=async e=>{let t=(0,s.rJ)(l,"novels",e,"chapters");return(await (0,s.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))},x=async e=>(await (0,s.GG)((0,s.rJ)(l,"users/".concat(e,"/history")))).docs.map(e=>({id:e.id,...e.data()}))},7014:(e,t,a)=>{"use strict";a.d(t,{default:()=>u});var r=a(5155),s=a(3166),n=a(6104),i=a(6203),l=a(5695);function o(){let e=(0,l.useRouter)(),t=async()=>{await (0,i.signOut)(n.j2),e.push("/login")};return(0,r.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 border rounded bg-white dark:bg-zinc-900 text-black dark:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 transition",children:"Sign Out"})}var d=a(6874),c=a.n(d);function u(){let{user:e}=(0,s.A)();return e?(0,r.jsx)(o,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c(),{href:"/login",className:"px-3 py-2 rounded bg-blue-600 text-white font-semibold shadow hover:bg-blue-700 transition text-sm sm:text-base",children:"Login"}),(0,r.jsx)(c(),{href:"/register",className:"px-3 py-2 rounded bg-green-600 text-white font-semibold shadow hover:bg-green-700 transition text-sm sm:text-base",children:"Register"})]})}},7049:(e,t,a)=>{"use strict";a.d(t,{D:()=>l,ThemeProvider:()=>i});var r=a(5155),s=a(2115);let n=(0,s.createContext)({theme:"light",toggleTheme:()=>{}});function i(e){let{children:t}=e,[a,i]=(0,s.useState)("light");return(0,s.useEffect)(()=>{let e=localStorage.getItem("theme");e&&i(e)},[]),(0,s.useEffect)(()=>{localStorage.setItem("theme",a),document.documentElement.classList.toggle("dark","dark"===a)},[a]),(0,r.jsx)(n.Provider,{value:{theme:a,toggleTheme:()=>i(e=>"light"===e?"dark":"light")},children:t})}let l=()=>(0,s.useContext)(n)}},e=>{var t=t=>e(e.s=t);e.O(0,[838,992,163,645,874,100,441,684,358],()=>t(460)),_N_E=e.O()}]);